


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API &mdash; xmen 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/jquery.fancybox.min.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/glpi.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="xmen 0.1 documentation" href="index.html"/>
        <link rel="prev" title="FAQ" href="faq.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> xmen
          

          
          </a>

          
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Xmen</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="class-api.html">Xmen Experiment Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheat-sheet.html">Cheat Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-xmen.functional">Functional</a></li>
<li class="toctree-l2"><a class="reference internal" href="#experiment">Experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#monitor">Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-xmen.utils">utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="#experimentmanager">ExperimentManager</a></li>
<li class="toctree-l2"><a class="reference internal" href="#globalexperimentmanager">GlobalExperimentManager</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">xmen</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
      
        <a href="faq.html" class="btn btn-neutral" title="FAQ" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-xmen.functional">
<span id="functional"></span><h2>Functional<a class="headerlink" href="#module-xmen.functional" title="Permalink to this headline">¶</a></h2>
<p>A collection of function and variables used to define experiments using the functional api</p>
<dl class="class">
<dt id="xmen.functional.Root">
<em class="property">class </em><code class="sig-prename descclassname">xmen.functional.</code><code class="sig-name descname">Root</code><span class="sig-paren">(</span><em class="sig-param">root=None</em>, <em class="sig-param">name=None</em>, <em class="sig-param">purpose=''</em>, <em class="sig-param">copy=True</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.functional.Root" title="Permalink to this definition">¶</a></dt>
<dd><p>The first argument passed to a functional experiment and principally used to root an experiment instance to a
particular directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">functional_experiment</span><span class="p">(</span><span class="n">root</span><span class="p">:</span> <span class="n">Root</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Running experiment)</span>

    <span class="n">root</span><span class="o">.</span><span class="n">message</span><span class="p">({</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()})</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Root is nothing more than Experiment with a different name. Whilst principally offering exactly the same
functionality, primarily the purpose of Root is to expose the directory property and messaging protocol of
the Experiment class to functional experiment definitions. However, there is nothing stopping the user
form using the full functionality of the Experiment class if they wish. Please consult the Experiment class
documentation in this case.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="xmen.functional.read_comments">
<code class="sig-prename descclassname">xmen.functional.</code><code class="sig-name descname">read_comments</code><span class="sig-paren">(</span><em class="sig-param">fn</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.functional.read_comments" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper function for reading comments from the function definition. This should not be generally needed as
xmen takes care of this for you.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fn</strong> – A functional experiment definition conforming to the xmen api</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A help string generated for each function argument.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>docs (str)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="xmen.functional.functional_experiment">
<code class="sig-prename descclassname">xmen.functional.</code><code class="sig-name descname">functional_experiment</code><span class="sig-paren">(</span><em class="sig-param">fn</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.functional.functional_experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a functional experiment to a class definition. Generally this should not be needed
as xmen takes care of this for you. Specifically:</p>
<blockquote>
<div><ul class="simple">
<li><p>The parameters of the experiment are added from the argument of the function</p></li>
<li><p>Comments next to each argument will be automatically added to the doc string of the experiment</p></li>
<li><p>The experiments run method will be set to <code class="docutils literal notranslate"><span class="pre">fn</span></code></p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fn</strong> (<em>xmen.Root</em>) – An experiment definition conforming to the xmen functioanl api (the function must take as its
first argument an object inheriting from experiment)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A class equivalent definition of <cite>fn</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Exp (class)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="xmen.functional.autodoc">
<code class="sig-prename descclassname">xmen.functional.</code><code class="sig-name descname">autodoc</code><span class="sig-paren">(</span><em class="sig-param">func</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.functional.autodoc" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator used to add parameter comments to the docstring of func.</p>
</dd></dl>

</div>
<div class="section" id="experiment">
<h2>Experiment<a class="headerlink" href="#experiment" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="xmen.experiment.Experiment">
<em class="property">class </em><code class="sig-prename descclassname">xmen.experiment.</code><code class="sig-name descname">Experiment</code><span class="sig-paren">(</span><em class="sig-param">root=None</em>, <em class="sig-param">name=None</em>, <em class="sig-param">purpose=''</em>, <em class="sig-param">copy=True</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class from which all other experiments derive. Experiments are defined by:</p>
<ol class="arabic simple">
<li><p><em>Parameters</em>: class attributes declared with the special parameter <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">&#64;p</span></code> in a comment after the definition.</p></li>
<li><p><em>Execution</em>: defined by overloading the <code class="docutils literal notranslate"><span class="pre">run()</span></code> method</p></li>
</ol>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AnExperiment</span><span class="p">(</span><span class="n">Experiment</span><span class="p">):</span>
     <span class="sd">&#39;&#39;&#39; Doc strings should be used to document the purpose of the experiment&#39;&#39;&#39;</span>
    <span class="c1"># experiment parameters are defined as class attributes with an @p tag in there comment</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Hello&#39;</span>   <span class="c1"># @p a parameter</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;World!&#39;</span>  <span class="c1"># @p another parameter</span>

    <span class="c1"># experiment execution code is defined in the experiments run method</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;</span><span class="si">{self.a}</span><span class="s1"> </span><span class="si">{self.b}</span><span class="s1">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="xmen.experiment.Experiment.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">root=None</em>, <em class="sig-param">name=None</em>, <em class="sig-param">purpose=''</em>, <em class="sig-param">copy=True</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new experiment object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>root</em><em>,</em>) – If not None then the experiment will be registered to a folder <code class="docutils literal notranslate"><span class="pre">{root}\{name}</span></code></p></li>
<li><p><strong>purpose</strong> (<em>str</em>) – An optional string giving the purpose of the experiment.</p></li>
<li><p><strong>copy</strong> (<em>bool</em>) – If True then parameters are deep copied to the object instance from the class definition.
Mutable attributes will no longer be shared.</p></li>
<li><p><strong>**kwargs</strong> – Override parameter defaults.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.directory">
<em class="property">property </em><code class="sig-name descname">directory</code><a class="headerlink" href="#xmen.experiment.Experiment.directory" title="Permalink to this definition">¶</a></dt>
<dd><p>The directory assigned to the experiment</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.root">
<em class="property">property </em><code class="sig-name descname">root</code><a class="headerlink" href="#xmen.experiment.Experiment.root" title="Permalink to this definition">¶</a></dt>
<dd><p>The root directory to which the experiment belongs</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.name">
<em class="property">property </em><code class="sig-name descname">name</code><a class="headerlink" href="#xmen.experiment.Experiment.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the current experiment</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.status">
<em class="property">property </em><code class="sig-name descname">status</code><a class="headerlink" href="#xmen.experiment.Experiment.status" title="Permalink to this definition">¶</a></dt>
<dd><p>The status of the experiment. One of <code class="docutils literal notranslate"><span class="pre">'default'</span></code>, <code class="docutils literal notranslate"><span class="pre">'registered'</span></code>, <code class="docutils literal notranslate"><span class="pre">'running'</span></code>, <code class="docutils literal notranslate"><span class="pre">'finished'</span></code> or
<code class="docutils literal notranslate"><span class="pre">'error'</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.created">
<em class="property">property </em><code class="sig-name descname">created</code><a class="headerlink" href="#xmen.experiment.Experiment.created" title="Permalink to this definition">¶</a></dt>
<dd><p>The date the experiment parameters were last updated.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.purpose">
<em class="property">property </em><code class="sig-name descname">purpose</code><a class="headerlink" href="#xmen.experiment.Experiment.purpose" title="Permalink to this definition">¶</a></dt>
<dd><p>A string giving a purpose message for the experiment</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.messages">
<em class="property">property </em><code class="sig-name descname">messages</code><a class="headerlink" href="#xmen.experiment.Experiment.messages" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of messages logged by the experimet.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.version">
<em class="property">property </em><code class="sig-name descname">version</code><a class="headerlink" href="#xmen.experiment.Experiment.version" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary giving the version information for the experiment</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.get_param_helps">
<code class="sig-name descname">get_param_helps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment.get_param_helps" title="Permalink to this definition">¶</a></dt>
<dd><p>Get help for all attributes in class (including inherited and private).</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.to_defaults">
<code class="sig-name descname">to_defaults</code><span class="sig-paren">(</span><em class="sig-param">defaults_dir</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment.to_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <code class="docutils literal notranslate"><span class="pre">defaults.yml</span></code> file from experiment object.
Any base class inheriting from Experiment can create a default file as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MyExperiment</span><span class="p">()</span><span class="o">.</span><span class="n">to_yaml</span><span class="p">(</span><span class="s1">&#39;/dir/to/defaults/root&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.debug">
<code class="sig-name descname">debug</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Inherited classes may overload debug. Used to define a set of setup for minimum example</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.from_yml">
<code class="sig-name descname">from_yml</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">copy=False</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment.from_yml" title="Permalink to this definition">¶</a></dt>
<dd><p>Load state from either a <code class="docutils literal notranslate"><span class="pre">params.yml</span></code> or <code class="docutils literal notranslate"><span class="pre">defaults.yml</span></code> file (inferred from the filename).
The status of the experiment will be updated to <code class="docutils literal notranslate"><span class="pre">'default'</span></code> if <code class="docutils literal notranslate"><span class="pre">'defaults.yml'</span></code>
file else <code class="docutils literal notranslate"><span class="pre">'registered'</span></code> if <code class="docutils literal notranslate"><span class="pre">params.yml</span></code> file.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.register">
<code class="sig-name descname">register</code><span class="sig-paren">(</span><em class="sig-param">root</em>, <em class="sig-param">name</em>, <em class="sig-param">purpose=''</em>, <em class="sig-param">force=True</em>, <em class="sig-param">same_names=100</em>, <em class="sig-param">generate_script=False</em>, <em class="sig-param">header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register an experiment to an experiment directory. Its status will be updated to <code class="docutils literal notranslate"><span class="pre">registered</span></code>. If an
experiment called <code class="docutils literal notranslate"><span class="pre">name</span></code> exists in <code class="docutils literal notranslate"><span class="pre">root</span></code> and <code class="docutils literal notranslate"><span class="pre">force==True</span></code> then name will be appended with an int
(eg. <code class="docutils literal notranslate"><span class="pre">{name}_0</span></code>) until a unique name is found in <code class="docutils literal notranslate"><span class="pre">root</span></code>. If <code class="docutils literal notranslate"><span class="pre">force==False</span></code> a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> will be raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if <code class="docutils literal notranslate"><span class="pre">{root}/{name}</span></code> already contains a <code class="docutils literal notranslate"><span class="pre">params.yml</span></code> file</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.to_root">
<code class="sig-name descname">to_root</code><span class="sig-paren">(</span><em class="sig-param">root_dir</em>, <em class="sig-param">shell='/bin/bash'</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment.to_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a <code class="docutils literal notranslate"><span class="pre">defaults.yml</span></code> file and <code class="docutils literal notranslate"><span class="pre">script.sh</span></code> file in <code class="docutils literal notranslate"><span class="pre">root_dir</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>root_dir</strong> (<em>str</em>) – A path to the root directory in which to generate a script.sh and defaults.yml to
run the experiment.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param">kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the parameters with a given dictionary</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.message">
<code class="sig-name descname">message</code><span class="sig-paren">(</span><em class="sig-param">messages</em>, <em class="sig-param">keep='latest'</em>, <em class="sig-param">leader=None</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment.message" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a message to the experiment (and an experiments params.yml file). If the experiment is not registered to
a root then no messages will be logged.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>messages</strong> (<em>dict</em>) – A dictionary of messages. Keys are interpreted as subjects and values interpreted as
messages. If the <code class="docutils literal notranslate"><span class="pre">defaults.yml</span></code> already contains subject then the message for subject will be
updated.</p></li>
<li><p><strong>keep</strong> (<em>str</em>) – which message to keep in the case of collision. One of [‘latest’, ‘min’, ‘max’]</p></li>
<li><p><strong>leader</strong> (<em>str</em>) – If not None then all messages will be saved if the keep condition is met for the leader key.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only messages of type float, int and string are supported. Any other message will be converted to type float
(if possible) then string thereafter.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.parse_args">
<code class="sig-name descname">parse_args</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment.parse_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the experiment instance from the command line arguments.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.main">
<code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">args=None</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment.main" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>Take the command line args and execute the experiment (see <code class="docutils literal notranslate"><span class="pre">parse_args</span></code> for more</dt><dd><p>information). In order to expose the command line interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">exp</span> <span class="o">=</span> <span class="n">AnExperiment</span><span class="p">()</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
<p>Note that for backwards compatibility it is also possible to pass <code class="docutils literal notranslate"><span class="pre">args</span></code> as an argument to <code class="docutils literal notranslate"><span class="pre">main</span></code>.
This allows the experiment to be run from the commandline as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">exp</span> <span class="o">=</span> <span class="n">AnExperiment</span><span class="p">()</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">exp</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="xmen.experiment.Experiment.stdout_to_txt">
<code class="sig-name descname">stdout_to_txt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xmen.experiment.Experiment.stdout_to_txt" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure stdout to also log to a text file in the experiment directory</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="monitor">
<h2>Monitor<a class="headerlink" href="#monitor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="xmen.monitor.Monitor">
<em class="property">class </em><code class="sig-prename descclassname">xmen.monitor.</code><code class="sig-name descname">Monitor</code><span class="sig-paren">(</span><em class="sig-param">directory=None</em>, <em class="sig-param">*</em>, <em class="sig-param">hooks=[]</em>, <em class="sig-param">checkpoint=None</em>, <em class="sig-param">checkpoints_to_keep=None</em>, <em class="sig-param">log=None</em>, <em class="sig-param">img=None</em>, <em class="sig-param">img_fn=None</em>, <em class="sig-param">img_n=None</em>, <em class="sig-param">sca=None</em>, <em class="sig-param">sca_fn=None</em>, <em class="sig-param">time=('&#64;100s'</em>, <em class="sig-param">'&#64;1e'</em>, <em class="sig-param">'&#64;1er'</em>, <em class="sig-param">'&#64;1eo'</em>, <em class="sig-param">'&#64;1se')</em>, <em class="sig-param">message=('self&#64;100step'</em>, <em class="sig-param">'self&#64;100epoch'</em>, <em class="sig-param">'self&#64;100era'</em>, <em class="sig-param">'self&#64;100eon'</em>, <em class="sig-param">'self&#64;100supereon')</em>, <em class="sig-param">limit=None</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.monitor.Monitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="xmen.monitor.Monitor.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">directory=None</em>, <em class="sig-param">*</em>, <em class="sig-param">hooks=[]</em>, <em class="sig-param">checkpoint=None</em>, <em class="sig-param">checkpoints_to_keep=None</em>, <em class="sig-param">log=None</em>, <em class="sig-param">img=None</em>, <em class="sig-param">img_fn=None</em>, <em class="sig-param">img_n=None</em>, <em class="sig-param">sca=None</em>, <em class="sig-param">sca_fn=None</em>, <em class="sig-param">time=('&#64;100s'</em>, <em class="sig-param">'&#64;1e'</em>, <em class="sig-param">'&#64;1er'</em>, <em class="sig-param">'&#64;1eo'</em>, <em class="sig-param">'&#64;1se')</em>, <em class="sig-param">message=('self&#64;100step'</em>, <em class="sig-param">'self&#64;100epoch'</em>, <em class="sig-param">'self&#64;100era'</em>, <em class="sig-param">'self&#64;100eon'</em>, <em class="sig-param">'self&#64;100supereon')</em>, <em class="sig-param">limit=None</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.monitor.Monitor.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Automate tracking, logging and saving of experiments.</p>
<p>Logging / checkpointing is configured through arguments of the form <code class="docutils literal notranslate"><span class="pre">f'{regex}&#64;{modulo}{trigger}'</span></code>.
Any variables in the local scope of the monitor which match the
specified regular expression will be logged / checkpointed every modulo steps of the trigger. Triggers are
incremented either manually (using the <code class="docutils literal notranslate"><span class="pre">inc</span></code> method) or automatically using nested iterators
(see example). Supported triggers include [“step”, “epoch”, “era”, “eon”, “supereon”] or their
abbreviations [“s”, “e”, “er”, “eo”, “se”].</p>
<p>Alongside the built in logging / checkpointing options, more sophisticated cases can be configured
through user defined hooks. If a hook is passed with modulo == None it can instead be triggered manually
as <code class="docutils literal notranslate"><span class="pre">monitor.to_hooks()</span></code>. Manual logging and checkpoint are also supported as
<code class="docutils literal notranslate"><span class="pre">monitor.log(...)</span></code> and <code class="docutils literal notranslate"><span class="pre">monitor.checkpoint(...)</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> – A path to store checkpoints / logs in (required for checkpointing and tensorboard logging
otherwise optional)</p></li>
<li><p><strong>checkpoint</strong> – checkpoint specified torch.Module objects</p></li>
<li><p><strong>log</strong> – log specified objects on triggers to stdout</p></li>
<li><p><strong>img</strong> – log as tensorboard images</p></li>
<li><p><strong>img_fn</strong> – Apply this function to each variable before logging as images</p></li>
<li><p><strong>sca</strong> – log as tensorboard scalars</p></li>
<li><p><strong>sca_fn</strong> – Apply this function to each variable before logging as scalars</p></li>
<li><p><strong>time</strong> – log timing statistics at these frequencies</p></li>
<li><p><strong>hooks</strong> – A list of user specified hooks conforming the the <code class="docutils literal notranslate"><span class="pre">Hook</span></code> api.</p></li>
<li><p><strong>message</strong> – summarise the current state of the experiment at these frequencies using the xmen.Experiment api.</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nn</span><span class="p">,</span> <span class="n">opt</span><span class="p">,</span> <span class="n">dataset</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span>

<span class="n">em</span> <span class="o">=</span> <span class="n">Monitor</span><span class="p">(</span>
    <span class="n">directory</span><span class="p">,</span>
    <span class="n">checkpoint</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;model@1e&#39;</span><span class="p">,</span> <span class="s1">&#39;opt@100s&#39;</span><span class="p">),</span>   <span class="c1"># Checkpoint the model once per epoch and opt every 100 steps</span>
    <span class="n">log</span><span class="o">=</span><span class="s1">&#39;^loss$@100s&#39;</span><span class="p">,</span>   <span class="c1"># Log the loss to stdout every 100 steps</span>
    <span class="n">img</span><span class="o">=</span><span class="s1">&#39;^x$@1000s&#39;</span><span class="p">,</span> <span class="n">sca</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;^loss$@100s&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_.*@1e&#39;</span><span class="p">),</span> <span class="n">time</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;@100s&#39;</span><span class="p">)</span>     <span class="c1"># Log to tensorboard</span>
    <span class="n">time</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;@100s&#39;</span><span class="p">,</span> <span class="p">),</span>   <span class="c1"># Generate timing statistics every 100 steps</span>
    <span class="n">hooks</span><span class="o">=</span><span class="p">[</span>  <span class="c1"># Custom hooks are also supported</span>
        <span class="n">MyVeryOwnHook</span><span class="p">(</span><span class="o">...</span><span class="p">)])</span>

<span class="c1"># The only modification needed to the training loop are the em calls.</span>
<span class="c1"># Nested loops corresponds to different triggers from inside out</span>
<span class="c1"># we have [&quot;step&quot; or &quot;s&quot;, &quot;epoch&quot; or &quot;e&quot;, &quot;era&quot; or &quot;er&quot;, &quot;eon&quot; or &quot;eo&quot;, &quot;supereon&quot; or &quot;se&quot;]</span>
<span class="k">for</span> <span class="n">epoch</span> <span class="ow">in</span> <span class="n">em</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)):</span>
    <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">em</span><span class="p">(</span><span class="n">datset</span><span class="p">):</span>
        <span class="n">_y_</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">opt</span><span class="o">.</span><span class="n">zero_grad</span><span class="p">()</span>
        <span class="n">loss</span> <span class="o">=</span> <span class="n">loss_fn</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">_y_</span><span class="p">)</span>
        <span class="n">loss</span><span class="o">.</span><span class="n">backward</span><span class="p">()</span>
        <span class="n">loss</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
        <span class="n">em</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Manual Logging is also supported&#39;</span><span class="p">)</span>
    <span class="n">eval_1</span><span class="p">,</span> <span class="n">eval_2</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">ds</span><span class="p">)</span>

<span class="c1"># Steps and epoch have been incremented</span>
<span class="k">assert</span> <span class="n">em</span><span class="o">.</span><span class="n">step</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span>
<span class="k">assert</span> <span class="n">em</span><span class="o">.</span><span class="n">epoch</span> <span class="o">==</span> <span class="mi">10</span>

<span class="c1"># Lets reload the model at the 5th epoch</span>
<span class="n">em</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">step</span><span class="o">=</span><span class="mi">5</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">),</span> <span class="n">model</span><span class="p">)</span>
<span class="c1"># The step and epoch will be updated</span>
<span class="nb">print</span><span class="p">(</span><span class="n">em</span><span class="o">.</span><span class="n">step</span><span class="p">,</span> <span class="n">em</span><span class="o">.</span><span class="n">epoch</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="xmen.monitor.Monitor.inc">
<code class="sig-name descname">inc</code><span class="sig-paren">(</span><em class="sig-param">trigger</em>, <em class="sig-param">back=1</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.monitor.Monitor.inc" title="Permalink to this definition">¶</a></dt>
<dd><p>Manually increment trigger. Will also run modulo hooks defined by the user.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.monitor.Monitor.to_hooks">
<code class="sig-name descname">to_hooks</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.monitor.Monitor.to_hooks" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass all keyword arguments to manual hooks (hooks where modulo is None)</p>
</dd></dl>

<dl class="method">
<dt id="xmen.monitor.Monitor.log">
<code class="sig-name descname">log</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">format=''</em>, <em class="sig-param">process_func=&lt;class 'str'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.monitor.Monitor.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Log string with time, epoch and step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – Value to be logged</p></li>
<li><p><strong>format</strong> – The format used to convert x to a string as ‘{x:{format}}’</p></li>
<li><p><strong>process_func</strong> – A callable able to convert x to a valid format for printing as {x:{format}}’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="xmen.monitor.Monitor.modulo">
<code class="sig-name descname">modulo</code><span class="sig-paren">(</span><em class="sig-param">trigger</em>, <em class="sig-param">modulo</em>, <em class="sig-param">exclude_1st=False</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.monitor.Monitor.modulo" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if trigger % modulo == 0. If exclude_1st is True then modulo will return False for triggers at 0</p>
</dd></dl>

<dl class="method">
<dt id="xmen.monitor.Monitor.checkpoint">
<code class="sig-name descname">checkpoint</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.monitor.Monitor.checkpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Checkpoint the torch.nn objects with step and epoch passed as <code class="docutils literal notranslate"><span class="pre">name==variable_to_save</span></code></p>
</dd></dl>

<dl class="method">
<dt id="xmen.monitor.Monitor.load">
<code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param">directory=None</em>, <em class="sig-param">step=None</em>, <em class="sig-param">attempt=True</em>, <em class="sig-param">update_triggers=True</em>, <em class="sig-param">**modules</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.monitor.Monitor.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the torch torch.nn objects passed as name=variable_to_load,
from the directory and reset the state of the em (if update_triggers == True). If attempt == False then an
Exception will be raised if either the directory does not contain checkpoints corresponding to modules.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.monitor.Monitor.summary">
<code class="sig-name descname">summary</code><span class="sig-paren">(</span><em class="sig-param">verbose=0</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.monitor.Monitor.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Summarise the current state of the experiment monitor</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-xmen.monitor"></span><dl class="exception">
<dt id="xmen.monitor.LastStep">
<em class="property">exception </em><code class="sig-prename descclassname">xmen.monitor.</code><code class="sig-name descname">LastStep</code><span class="sig-paren">(</span><em class="sig-param">trigger</em>, <em class="sig-param">step</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.monitor.LastStep" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="xmen.monitor.load">
<code class="sig-prename descclassname">xmen.monitor.</code><code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param">load_dir</em>, <em class="sig-param">step=None</em>, <em class="sig-param">attempt=True</em>, <em class="sig-param">**modules</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.monitor.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load torch objects from a checkpoint object. If <code class="docutils literal notranslate"><span class="pre">Step</span> <span class="pre">is</span> <span class="pre">None</span></code> then the most recent checkpoint is loaded.
Else the checkpoint is loaded at the specified step. If attempt == False then load will raise a ValueError
if either one of the modules was not found in modules or if no checkpoints were found in load_dir.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>No check to ensure the meta information in each file is the same. The meta information returned corresponds
to the first module encountered in modules.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-xmen.utils">
<span id="utils"></span><h2>utils<a class="headerlink" href="#module-xmen.utils" title="Permalink to this headline">¶</a></h2>
<p>A module containing several utilitity functions, classes and Meta Classes used by the ExperimentManager
and the Experiment classes.</p>
<dl class="function">
<dt id="xmen.utils.get_meta">
<code class="sig-prename descclassname">xmen.utils.</code><code class="sig-name descname">get_meta</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xmen.utils.get_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Meta information for the system</p>
</dd></dl>

<dl class="function">
<dt id="xmen.utils.get_attribute_helps">
<code class="sig-prename descclassname">xmen.utils.</code><code class="sig-name descname">get_attribute_helps</code><span class="sig-paren">(</span><em class="sig-param">cls</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.utils.get_attribute_helps" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all help files for class <code class="docutils literal notranslate"><span class="pre">cls</span></code> from doc strings from all inherited classes.</p>
</dd></dl>

<dl class="function">
<dt id="xmen.utils.get_docs">
<code class="sig-prename descclassname">xmen.utils.</code><code class="sig-name descname">get_docs</code><span class="sig-paren">(</span><em class="sig-param">cl</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.utils.get_docs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all docs for every inherited class</p>
</dd></dl>

<dl class="class">
<dt id="xmen.utils.TypedMeta">
<em class="property">class </em><code class="sig-prename descclassname">xmen.utils.</code><code class="sig-name descname">TypedMeta</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">bases</em>, <em class="sig-param">attr_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.utils.TypedMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>A meta class helper used to generate automatic doc strings generated from typed class definitions. This allows
the docstrings to be defined inside the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> body instead of inside the doc string iradicating the need
to type attributes twice:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MyClass</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">TypedMeta</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;This class is bound to do something...&#39;&#39;&#39;</span>

    <span class="n">a</span> <span class="nb">int</span><span class="p">:</span> <span class="mi">3</span>   <span class="c1"># @p My first attribute</span>
    <span class="n">b</span> <span class="nb">int</span><span class="p">:</span> <span class="mi">5</span>   <span class="c1"># @p My second attribute</span>

 <span class="n">m</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
 <span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">__init</span><span class="o">.</span><span class="n">__</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
</pre></div>
</div>
<p>Now if we call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ob</span> <span class="o">=</span> <span class="nb">print</span><span class="p">(</span><span class="n">MyClass</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>

<span class="go"> This class is bound to do something...</span>

<span class="go"> Parameters:</span>
<span class="go">     a (int) : My first attribute (default=3)</span>
<span class="go">     b (int) : My second attribute (default=5)</span>
</pre></div>
</div>
<p>The doc string has automatically been updated.</p>
</dd></dl>

<dl class="function">
<dt id="xmen.utils.get_git">
<code class="sig-prename descclassname">xmen.utils.</code><code class="sig-name descname">get_git</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.utils.get_git" title="Permalink to this definition">¶</a></dt>
<dd><p>Get git information for the given path.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Empty if status == False otherwise with keys:</dt><dd><ul class="simple">
<li><p>remote: A url to the remote repository</p></li>
<li><p>hash: A git hash to the current commit</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><p>(dict)</p>
<dl class="simple">
<dt>status (bool): False if either git is not available, the repo is not in a git repository or if there are</dt><dd><p>uncommited changes in the current repository. Otherwise true</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="xmen.utils.get_version">
<code class="sig-prename descclassname">xmen.utils.</code><code class="sig-name descname">get_version</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">path=None</em>, <em class="sig-param">cls=None</em>, <em class="sig-param">fn=None</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.utils.get_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get version information for either a path to a directory or a class. Git version information is loaded
if available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – A path to a repository which is inspected for version information</p></li>
<li><p><strong>cls</strong> (<em>Class</em>) – A Class object to be inspected for version information</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A dictionary containing at least one of the following:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">path</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">None:</span></code></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'path'</span></code>: A copy of the path</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">cls</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">None:</span></code></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'module'</span></code>: A path to the module in which the class was defined</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'class'</span></code>: The name of the class</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">git</span> <span class="pre">!=</span> <span class="pre">{}</span></code>: (i.e if path or module is in a git repository):</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'git_local'</span></code>: The root of the local git repository</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'git_commit'</span></code>: The hash of the commit</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'git_remote'</span></code>: The remote url if has remote else <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>version (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="xmen.utils.get_run_script">
<code class="sig-prename descclassname">xmen.utils.</code><code class="sig-name descname">get_run_script</code><span class="sig-paren">(</span><em class="sig-param">module</em>, <em class="sig-param">name</em>, <em class="sig-param">shell='/usr/bin/env python3'</em>, <em class="sig-param">comment='#'</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.utils.get_run_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a run script for a particular experiment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>module</strong> (<em>str</em>) – the module to look in</p></li>
<li><p><strong>name</strong> (<em>str</em>) – the name of the experiment in the module. If name corresponds to
a function it will be converted to an Experiment class</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="experimentmanager">
<h2>ExperimentManager<a class="headerlink" href="#experimentmanager" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="xmen.manager.ExperimentManager">
<em class="property">class </em><code class="sig-prename descclassname">xmen.manager.</code><code class="sig-name descname">ExperimentManager</code><span class="sig-paren">(</span><em class="sig-param">root=''</em>, <em class="sig-param">headless=False</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper class with wrapped command line interface used to manage a set of experiments. It is compatible both
with experiments generated by the <code class="docutils literal notranslate"><span class="pre">Experiment.to_root</span></code> method call as well as any experiment that can be
represented as a bash <cite>script.sh</cite> which takes a set of parameters in a yaml file as input.</p>
<dl>
<dt>More Info:</dt><dd><blockquote>
<div><p>At its core the experiment manager maintains a single <cite>root</cite> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>root
├── defaults.yml
├── experiment.yml
├── script.sh
├── {param}:{value}__{param}:{value}
│   └── params.yml
├── {param}:{value}__{param}:{value}
│   └── params.yml
...
</pre></div>
</div>
<p>In the above we have:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">defaults.yml</span></code> defines a set of parameter keys and there default values shared by each experiment. It
generated from the <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> class it will look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   # Optional additional Meta parameters
   _created: 06:58PM September 16, 2019    # The date the defaults were created
   _version:
       module: /path/to/module/experiment/that/generated/defaults/was/defined/in
       class: TheNameOfTheExperiment
       git:
          local: /path/to/git/repo/defaults/were/defined/in
          branch: some_branch
          remote: /remote/repo/url
          commit: 80dcfd98e6c3c17e1bafa72ee56744d4a6e30e80    # The git commit defaults were generatd at

   # Default parameters
   a: 3 #  This is the first parameter (default=3)
   b: &#39;4&#39; #  This is the second parameter (default=&#39;4&#39;)

The ``ExperimentManager`` is also compatible with generic experiments. In this the ``_version`` meta
field can be added manually, replacing ``module`` and ``class`` with ``path``. The git information for
each will be updated automatically provided ``path`` is within a git repository.
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">script.sh</span></code> is a bash script. When run it takes a single argument <code class="docutils literal notranslate"><span class="pre">'params.yml'</span></code> (eg. <code class="docutils literal notranslate"><span class="pre">`script.sh</span> <span class="pre">params.yml`</span></code>).</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Experiment</span></code> objects are able to automatically generate script.sh files that look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
# File generated on the 06:34PM September 13, 2019
# GIT:
# - repo /path/to/project/module/
# - remote {/path/to/project/module/url}
# - commit 51ad1eae73a2082e7636056fcd06e112d3fbca9c

export PYTHONPATH=&quot;${PYTHONPATH}:path/to/project&quot;
python /path/to/project/module/experiment.py --execute ${1}
</pre></div>
</div>
</div>
</div></blockquote>
<p>Generic experiments are compatible with the <code class="docutils literal notranslate"><span class="pre">ExperimentManager</span></code> provided they can be executed with a
shell script. For example a bash only experiment might have a <code class="docutils literal notranslate"><span class="pre">script.sh</span></code> script that looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="n">echo</span> <span class="s2">&quot;$(cat $</span><span class="si">{1}</span><span class="s2">)&quot;</span>
</pre></div>
</div>
</li>
<li><p>A set of experiment folders representing individual experiments within which each experiment has a
<code class="docutils literal notranslate"><span class="pre">params.yml</span></code> with a set of override parameters changed from the original defaults. These overrides define the
unique name of each experiment (in the case that multiple experiments share the same overrides each experiment
folder is additionally numbered after the first instantiation). Additionally, each <code class="docutils literal notranslate"><span class="pre">params.yml</span></code> contains the
following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Parameters special to params.yml</span>
<span class="n">_root</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">root</span>  <span class="c1">#  The root directory to which the experiment belongs (should not be set)</span>
<span class="n">_name</span><span class="p">:</span> <span class="n">a</span><span class="p">:</span><span class="mi">10</span><span class="n">__b</span><span class="p">:</span><span class="mi">3</span> <span class="c1">#  The name of the experiment (should not be set)</span>
<span class="n">_status</span><span class="p">:</span> <span class="n">registered</span> <span class="c1">#  The status of the experiment (one of [&#39;registered&#39; | &#39;running&#39; | &#39;error&#39; | &#39;finished&#39;])</span>
<span class="n">_created</span><span class="p">:</span> <span class="mi">07</span><span class="p">:</span><span class="mi">41</span><span class="n">PM</span> <span class="n">September</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">2019</span> <span class="c1">#  The date the experiment was created (should not be set)</span>
<span class="n">_purpose</span><span class="p">:</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">experiment</span> <span class="n">example</span> <span class="c1">#  The purpose for the experiment (should not be set)</span>
<span class="n">_messages</span><span class="p">:</span> <span class="p">{}</span> <span class="c1">#  A dictionary of messages which are able to vary throughout the experiment (should not be set)</span>

<span class="c1"># git information is updated at registration if ``_version[&#39;module&#39;]`` or `_version[&#39;path&#39;]``</span>
<span class="c1"># exists in the defaults.yml file and the path is to a valid git repo.</span>
<span class="n">_version</span><span class="p">:</span>
    <span class="n">module</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">module</span>   <span class="c1"># Path to module where experiment was generated</span>
    <span class="n">class</span><span class="p">:</span> <span class="n">NameOfExperimentClass</span>     <span class="c1"># Name of experiment class params are compatible with</span>
    <span class="n">git</span><span class="p">:</span> <span class="c1">#  A dictionary containing the git history corresponding to the defaults.yml file. Only</span>
      <span class="n">local_path</span><span class="p">:</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">repo</span><span class="o">/</span><span class="n">params</span><span class="o">/</span><span class="n">were</span><span class="o">/</span><span class="n">defined</span><span class="o">/</span><span class="ow">in</span>
      <span class="n">remote_url</span><span class="p">:</span> <span class="o">/</span><span class="n">remote</span><span class="o">/</span><span class="n">repo</span><span class="o">/</span><span class="n">url</span>
      <span class="nb">hash</span><span class="p">:</span> <span class="mi">80</span><span class="n">dcfd98e6c3c17e1bafa72ee56744d4a6e30e80</span>
                    <span class="c1"># Parameters from the default (with values overridden)</span>
<span class="n">a</span><span class="p">:</span> <span class="mi">3</span> <span class="c1">#  This is the first parameter (default=3)</span>
<span class="n">b</span><span class="p">:</span> <span class="s1">&#39;4&#39;</span> <span class="c1">#  This is the second parameter (default=&#39;4&#39;)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">experiment.yml</span></code> preserves the experiment state with the following entries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">root</span>
<span class="n">defaults</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">defaults</span><span class="o">.</span><span class="n">yml</span>
<span class="n">script</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">script</span><span class="o">.</span><span class="n">sh</span>
<span class="n">experiments</span><span class="p">:</span>
<span class="o">-</span> <span class="o">/</span><span class="n">private</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">new</span><span class="o">-</span><span class="n">test</span><span class="o">/</span><span class="n">a</span><span class="p">:</span><span class="mi">10</span><span class="n">__b</span><span class="p">:</span><span class="mi">3</span>
<span class="o">-</span> <span class="o">/</span><span class="n">private</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">new</span><span class="o">-</span><span class="n">test</span><span class="o">/</span><span class="n">a</span><span class="p">:</span><span class="mi">20</span><span class="n">__b</span><span class="p">:</span><span class="mi">3</span>
<span class="o">-</span> <span class="o">/</span><span class="n">private</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">new</span><span class="o">-</span><span class="n">test</span><span class="o">/</span><span class="n">a</span><span class="p">:</span><span class="mi">10</span><span class="n">__b</span><span class="p">:</span><span class="mi">3_1</span>
<span class="n">overides</span><span class="p">:</span>
<span class="o">-</span> <span class="n">a</span><span class="p">:</span> <span class="mi">10</span>
  <span class="n">b</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span>
<span class="o">-</span> <span class="n">a</span><span class="p">:</span> <span class="mi">20</span>
  <span class="n">b</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span>
<span class="o">-</span> <span class="n">a</span><span class="p">:</span> <span class="mi">10</span>
  <span class="n">b</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span>
<span class="n">created</span><span class="p">:</span> <span class="mi">07</span><span class="p">:</span><span class="mi">41</span><span class="n">PM</span> <span class="n">September</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">2019</span>   <span class="c1"># The date the experiment manager was initialised</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">ExperimentManager</span></code> provides the following public interface for managing experiments:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">__init__(root)</span></code>:</dt><dd><p>Link the experiment manager with a root directory and load the experiments.yml if it exists</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">initialise(script,</span> <span class="pre">defaults)</span></code>:</dt><dd><p>Initialise an experiment set with a given script and default parameters</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">register(string_pattern)</span></code>:</dt><dd><p>Register a number of experiments overriding parameters based on the particular <code class="docutils literal notranslate"><span class="pre">string_pattern</span></code></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">list()</span></code>:</dt><dd><p>Print all the experiments and their associated information</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">unlink(pattern)</span></code>:</dt><dd><p>Relieve the experiment manager of responsibility for all experiment names matching pattern</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">clean()</span></code>:</dt><dd><p>Delete any experiments which are no longer the responsibility of the experiment manager</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">run(string,</span> <span class="pre">options)</span></code>:</dt><dd><p>Run an experiment or all experiments (if string is <code class="docutils literal notranslate"><span class="pre">'all'</span></code>) with options prepended.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">experiment_manager</span> <span class="o">=</span> <span class="n">ExperimentManager</span><span class="p">(</span><span class="n">ROOT_PATH</span><span class="p">)</span>   <span class="c1"># Create experiment set in ROOT_PATH</span>
<span class="n">experiment_manager</span><span class="o">.</span><span class="n">initialise</span><span class="p">(</span><span class="n">PATH_TO_SCRIPT</span><span class="p">,</span> <span class="n">PATH_TO_DEFAULTS</span><span class="p">)</span>
<span class="n">experiment_manager</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;parama: 1, paramb: [x, y]&#39;</span><span class="p">)</span>      <span class="c1"># Register a set of experiments</span>
<span class="n">experiment_manger</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="s1">&#39;parama_1__paramb_y&#39;</span><span class="p">)</span>                <span class="c1"># Remove an experiment</span>
<span class="n">experiment_manager</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>                                    <span class="c1"># Get rid of any experiments no longer managed</span>
<span class="n">experiment_run</span><span class="p">(</span><span class="s1">&#39;parama:1__paramb:x&#39;</span><span class="p">,</span> <span class="n">sh</span><span class="p">)</span>                      <span class="c1"># Run an experiment</span>
<span class="n">experiment_run</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>                                         <span class="c1"># Run all created experiments</span>
</pre></div>
</div>
</div></blockquote>
<dl class="method">
<dt id="xmen.manager.ExperimentManager.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">root=''</em>, <em class="sig-param">headless=False</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Link an experiment manager to root. If root already contains an <code class="docutils literal notranslate"><span class="pre">experiment.yml</span></code> then it is loaded.</p>
<p>In order to link a new experiment with a defaults.yml and script.sh file then the initialise method must be
called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root</strong> – The root directory within which to create the experiment. If “” then the current working directory is
used. If the root directory does not exist it will be made.</p></li>
<li><p><strong>root</strong> – The root directory of the experiment manger</p></li>
<li><p><strong>defaults</strong> – A path to the defaults.yml file. Will be None for a fresh experiment manager (if experiments.yml
has just been created).</p></li>
<li><p><strong>script</strong> – A path to the script.sh file. Will be None for a fresh experiment manager (if experiments.yml
has just been created).</p></li>
<li><p><strong>created</strong> – A string giving the date-time the experiment was created</p></li>
<li><p><strong>experiments</strong> – A list of paths to the experiments managed by the experiment manager</p></li>
<li><p><strong>overides</strong> – A list of dictionaries giving the names (keys) and values of the parameters overridden from the
defaults for each experiment in experiments.</p></li>
<li><p><strong>notes</strong> – A set of notes attched to the experiment set</p></li>
<li><p><strong>purpose</strong> – The purpose of the epxeriment</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd>
</dl>
<dl class="method">
<dt id="xmen.manager.ExperimentManager.check_initialised">
<code class="sig-name descname">check_initialised</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.check_initialised" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure that <code class="docutils literal notranslate"><span class="pre">'experiment.yml'</span></code>, <code class="docutils literal notranslate"><span class="pre">'script.sh'</span></code>, <code class="docutils literal notranslate"><span class="pre">'defaults.yml'</span></code> all exist in the directory</p>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.load_defaults">
<code class="sig-name descname">load_defaults</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.load_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the <code class="docutils literal notranslate"><span class="pre">defaults.yml</span></code> file into a dictionary</p>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.save_params">
<code class="sig-name descname">save_params</code><span class="sig-paren">(</span><em class="sig-param">params</em>, <em class="sig-param">experiment_name</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.save_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a dictionary of parameters at <code class="docutils literal notranslate"><span class="pre">{root}/{experiment_name}/params.yml</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>dict</em>) – A dictionary of parameters to be saved. Can also be a CommentedMap from ruamel</p></li>
<li><p><strong>experiment_name</strong> (<em>str</em>) – The name of the experiment</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.update_meta">
<code class="sig-name descname">update_meta</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.update_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a dictionary of parameters at <code class="docutils literal notranslate"><span class="pre">{root}/{experiment_name}/params.yml</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>dict</em>) – A dictionary of parameters to be saved. Can also be a CommentedMap from ruamel</p></li>
<li><p><strong>experiment_name</strong> (<em>str</em>) – The name of the experiment</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.load_params">
<code class="sig-name descname">load_params</code><span class="sig-paren">(</span><em class="sig-param">experiment_path</em>, <em class="sig-param">experiment_name=False</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.load_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Load parameters for an experiment. If <code class="docutils literal notranslate"><span class="pre">experiment_name</span></code> is True then experiment_path is assumed to be a
path to the folder of the experiment else it is assumed to be a path to the <code class="docutils literal notranslate"><span class="pre">params.yml</span></code> file.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.initialise">
<code class="sig-name descname">initialise</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">defaults=''</em>, <em class="sig-param">script=''</em>, <em class="sig-param">purpose=''</em>, <em class="sig-param">name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.initialise" title="Permalink to this definition">¶</a></dt>
<dd><p>Link an experiment manager with a <code class="docutils literal notranslate"><span class="pre">defaults.yml</span></code> file and <code class="docutils literal notranslate"><span class="pre">sript.sh</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>defaults</strong> (<em>str</em>) – A path to a <code class="docutils literal notranslate"><span class="pre">defaults.yml</span></code>. If “” then a <code class="docutils literal notranslate"><span class="pre">defaults.yml</span></code> is searched for in the current
work directory.</p></li>
<li><p><strong>script</strong> (<em>str</em>) – A path to a <code class="docutils literal notranslate"><span class="pre">script.sh</span></code>. If <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> then a script.sh file is searched for in the current work
directory.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.note">
<code class="sig-name descname">note</code><span class="sig-paren">(</span><em class="sig-param">msg</em>, <em class="sig-param">remove=False</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.note" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a note to the epxeriment manager. If remove is True msg is deleted instead.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.move">
<code class="sig-name descname">move</code><span class="sig-paren">(</span><em class="sig-param">dest</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.move" title="Permalink to this definition">¶</a></dt>
<dd><p>Move the current experiment set from one location to another.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.register">
<code class="sig-name descname">register</code><span class="sig-paren">(</span><em class="sig-param">name=None</em>, <em class="sig-param">string_params=None</em>, <em class="sig-param">purpose=''</em>, <em class="sig-param">header=None</em>, <em class="sig-param">shell='/bin/bash'</em>, <em class="sig-param">repeats=1</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a set of experiments with the experiment manager.</p>
<p>Experiments are created by passing a yaml dictionary string of parameters to overload in the <code class="docutils literal notranslate"><span class="pre">params.yml</span></code>
file. The special symbol <code class="docutils literal notranslate"><span class="pre">'|'</span></code> can be thought of as an or operator. When encountered each of the parameters
either side <code class="docutils literal notranslate"><span class="pre">'|'</span></code> will be created separately with all other parameter combinations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string_params</strong> (<em>str</em>) – <p>A yaml dictionary of parameters to override of the form
<code class="docutils literal notranslate"><span class="pre">'{p1:</span> <span class="pre">val11</span> <span class="pre">|</span> <span class="pre">val12,</span> <span class="pre">p2:</span> <span class="pre">val2,</span> <span class="pre">p3:</span> <span class="pre">val2</span> <span class="pre">|</span> <span class="pre">p4:</span> <span class="pre">val31</span> <span class="pre">|</span> <span class="pre">val32</span> <span class="pre">|</span> <span class="pre">val33,</span> <span class="pre">...}'</span></code>.
The type of each parameter is inferred from its value in defaults. A ValueError will be raised if any
of the parameter cannot be found in defaults. Parameters can be float (1.), int (1), str (a), None, and
dictionaries {a: 1., 2.} or lists [1, 2] of these types_match. None parameters are specified using empty space.
The length of list parameters must match the length of the parameter in default.
Dictionary parameters may only be partially defined. Missing keys will be assumed
to take there default value.</p>
<p>The special character ‘|’ is used as an or operator. All combinations of parameters
either side of an | operator will be created as separate experiments. In the example above
<code class="docutils literal notranslate"><span class="pre">N</span> <span class="pre">=</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">3</span> <span class="pre">=</span> <span class="pre">12</span></code> experiments will be generated representing all the possible values for
parameters <code class="docutils literal notranslate"><span class="pre">p1</span></code>, <code class="docutils literal notranslate"><span class="pre">p3</span></code> and <code class="docutils literal notranslate"><span class="pre">p4</span></code> can take with <code class="docutils literal notranslate"><span class="pre">p2</span></code> set to <code class="docutils literal notranslate"><span class="pre">val2</span></code> for all.</p>
</p></li>
<li><p><strong>purpose</strong> (<em>str</em>) – An optional purpose message for the experiment.</p></li>
<li><p><strong>header</strong> (<em>str</em>) – An optional header message prepended to each run script.sh</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is currently only able to register list or dictionary parameters at the first level.
<code class="docutils literal notranslate"><span class="pre">{a:</span> <span class="pre">{a:</span> <span class="pre">1..</span> <span class="pre">b:</span> <span class="pre">2.}</span> <span class="pre">|</span> <span class="pre">{a:</span> <span class="pre">2..</span> <span class="pre">b:</span> <span class="pre">2.}}</span></code> works creating two experiments with over-ridden dicts in each case
but <code class="docutils literal notranslate"><span class="pre">{a:</span> <span class="pre">{a:</span> <span class="pre">1.</span> <span class="pre">|</span> <span class="pre">2.,</span>&#160; <span class="pre">b:2.}}</span></code> will fail.</p>
<p>The type of each override is inferred from the type contained in the defaults.yml file (ints will be cast
to floats etc.) where possible. This is not the case when there is an optional parameter that can take a
None value. If None (null yaml) is passed as a value it will not be cast. If a default.yml entry is
given the value null the type of any overrides in this case will be inferred from the yaml string.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param">pattern</em>, <em class="sig-param">status='registered'</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the status of the experiment. This is useful if you need to re-run an experiment
from a latest saved checkpoint for example.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pattern</strong> – The experiment name</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.list">
<code class="sig-name descname">list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.list" title="Permalink to this definition">¶</a></dt>
<dd><p>List all experiments currently created with the experiment manager.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.clean">
<code class="sig-name descname">clean</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove directories no longer linked to the experiment manager</p>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">pattern</em>, <em class="sig-param">*args</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run all experiments that match the global pattern using the run command given by args.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.unlink">
<code class="sig-name descname">unlink</code><span class="sig-paren">(</span><em class="sig-param">pattern='*'</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.unlink" title="Permalink to this definition">¶</a></dt>
<dd><p>Unlink all experiments matching pattern. Does not delete experiment folders simply deletes the experiment
paths from the experiment folder. To delete call method <code class="docutils literal notranslate"><span class="pre">clean</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.manager.ExperimentManager.relink">
<code class="sig-name descname">relink</code><span class="sig-paren">(</span><em class="sig-param">pattern='*'</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.manager.ExperimentManager.relink" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-link all experiment folders that match <code class="docutils literal notranslate"><span class="pre">pattern</span></code> (and are not currently managed by the experiment
manager)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="globalexperimentmanager">
<h2>GlobalExperimentManager<a class="headerlink" href="#globalexperimentmanager" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="xmen.config.GlobalExperimentManager">
<em class="property">class </em><code class="sig-prename descclassname">xmen.config.</code><code class="sig-name descname">GlobalExperimentManager</code><a class="headerlink" href="#xmen.config.GlobalExperimentManager" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper class used to manage global configuration of the Experiment Manager</p>
<dl class="method">
<dt id="xmen.config.GlobalExperimentManager.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xmen.config.GlobalExperimentManager.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="xmen.config.GlobalExperimentManager.clean">
<code class="sig-name descname">clean</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xmen.config.GlobalExperimentManager.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Iteratively search through experiment sets and remove any that no longer exist.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is performed by checking that experiment folder is a valid set using
using <code class="docutils literal notranslate"><span class="pre">ExperimentManager(p).check_initialised()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="xmen.config.GlobalExperimentManager.find">
<code class="sig-name descname">find</code><span class="sig-paren">(</span><em class="sig-param">mode='all'</em>, <em class="sig-param">pattern='*'</em>, <em class="sig-param">param_match=None</em>, <em class="sig-param">types_match=None</em>, <em class="sig-param">load_defaults=False</em>, <em class="sig-param">missing_entry=''</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.config.GlobalExperimentManager.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Search through all experiments in the globally filtering by experiment location, parameters, and type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> (<em>str</em>) – If ‘all’ then all experiments for each set will be concatenated and summarised individually
whilst if ‘set’ then experiments will be summarised and searched for based on the default parameters.</p></li>
<li><p><strong>pattern</strong> (<em>str</em>) – A unix glob pattern of experiments to consider</p></li>
<li><p><strong>param_match</strong> (<em>list</em>) – A list of strings providing a condition to filter experiments by their parameters.
Compatible string formats are “regex”, “regex op val” or “val1 op1 regex op2 val2” where op is in
<code class="docutils literal notranslate"><span class="pre">[&lt;=,==,&gt;=,&lt;,&gt;,!=]</span></code>. If just a regex is supplied then only experiments with parameters matching the
regex will be returned. If an op is supplied then only experiments with all parameters which match the
regex and satisfy the condition will be returned.</p></li>
<li><p><strong>types_match</strong> (<em>list</em>) – A list of types of experiments to search for</p></li>
<li><p><strong>load_defaults</strong> (<em>bool</em>) – If True then <code class="docutils literal notranslate"><span class="pre">defaults.yml</span></code> files will be loaded and the parameters of each
experiment inferred from the overides defined in the <code class="docutils literal notranslate"><span class="pre">experiment.yml</span></code> file for each experiment set.
This is potentially faster (less io) but means that the messages for each experiment will not be
returned.</p></li>
<li><p><strong>missing_entry</strong> – Assign this parameter to missing values (see notes).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A dict with possible keys <a href="#id1"><span class="problematic" id="id2">``</span></a>[‘_root’, ‘_purpose’, ‘_type’, ‘_notes’,  ‘_name’, ‘_created’,</dt><dd><p>’_version’, ‘_status’, ‘_messages’, ‘_experiments’, <a href="#id3"><span class="problematic" id="id4">*</span></a>param_keys]`` where  <code class="docutils literal notranslate"><span class="pre">param_keys</span></code> correspond to
any parameters that satisfy the conditions in param_match. The keys
<code class="docutils literal notranslate"><span class="pre">['_root',</span> <span class="pre">'_purpose',</span> <span class="pre">'_type',</span> <span class="pre">'_notes',</span> <span class="pre">'_created']</span></code> will always be present,
<code class="docutils literal notranslate"><span class="pre">['_name',</span> <span class="pre">'_version']</span></code> will be added if <code class="docutils literal notranslate"><span class="pre">load_defaults==True</span></code> and <code class="docutils literal notranslate"><span class="pre">['_name',</span> <span class="pre">'_version',</span>
<span class="pre">'_status',</span> <span class="pre">'_messages]</span></code> if <code class="docutils literal notranslate"><span class="pre">load_defaults==False</span></code>. If [mode == ‘set’] then
the key  ‘_experiments’ will also be added (giving a list of paths to the experiments in each set).
The created dates in this case correspond to the date the set was created
(given in defaults.yml).</p>
</dd>
</dl>
<p>special_keys (dict): A list of keys starting with ‘_’ present in the dictionary.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>matches (dict)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>Due to the use of regex and conditions it is possible for parameters to match in one experiment which are</dt><dd><p>not present in another. In this case missing parameters are given a value equal to <code class="docutils literal notranslate"><span class="pre">missing_string</span></code>.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="xmen.config.GlobalExperimentManager.find_to_dataframe">
<code class="sig-name descname">find_to_dataframe</code><span class="sig-paren">(</span><em class="sig-param">table</em>, <em class="sig-param">verbose=True</em>, <em class="sig-param">display_git=None</em>, <em class="sig-param">display_purpose=None</em>, <em class="sig-param">display_date=None</em>, <em class="sig-param">display_messages=None</em>, <em class="sig-param">display_status=None</em>, <em class="sig-param">display_meta=None</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.config.GlobalExperimentManager.find_to_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the output of the <cite>find</cite> method to a formatted data frame configured by args. If verbose then all
entries will be displayed (independent of the other args)</p>
</dd></dl>

<dl class="method">
<dt id="xmen.config.GlobalExperimentManager.add_experiment">
<code class="sig-name descname">add_experiment</code><span class="sig-paren">(</span><em class="sig-param">module</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#xmen.config.GlobalExperimentManager.add_experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a python experiment <code class="docutils literal notranslate"><span class="pre">name</span></code> defined in <code class="docutils literal notranslate"><span class="pre">module</span></code> either as a class or function.</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="faq.html" class="btn btn-neutral" title="FAQ" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Rob Weston.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>
      <script type="text/javascript" src="_static/jquery.fancybox.min.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
  <script type="text/javascript">
    $(function(){
      $('.image-reference').fancybox();
    })
  </script>

</body>
</html>