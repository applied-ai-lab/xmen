


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Xmen Experiment Classes &mdash; xmen 0.2.3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/jquery.fancybox.min.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/glpi.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="xmen 0.2.3 documentation" href="index.html"/>
        <link rel="next" title="Cheat Sheet" href="cheat-sheet.html"/>
        <link rel="prev" title="Examples" href="examples.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> xmen
          

          
          </a>

          
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Xmen</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Xmen Experiment Classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Defining-Experiments">Defining Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Automatic-Documentation">Automatic Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Configuring-Experiments">Configuring Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Inheritance">Inheritance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Configuring">Configuring</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Registering">Registering</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Running">Running</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cheat-sheet.html">Cheat Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">xmen</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Xmen Experiment Classes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/class-api.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="cheat-sheet.html" class="btn btn-neutral float-right" title="Cheat Sheet" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="examples.html" class="btn btn-neutral" title="Examples" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 7ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Xmen-Experiment-Classes">
<h1>Xmen Experiment Classes<a class="headerlink" href="#Xmen-Experiment-Classes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Defining-Experiments">
<h2>Defining Experiments<a class="headerlink" href="#Defining-Experiments" title="Permalink to this headline">¶</a></h2>
<div class="highlight-experiments notranslate"><div class="highlight"><pre><span></span>from xmen.experiment import Experiment
import os
import time
from typing import List


class BaseExperiment(Experiment):
    &quot;&quot;&quot;A basic experiments experiment demonstrating the features of the xmen api.&quot;&quot;&quot;

    # Parameters are defined as attributes in the class body with the
    # @p identifier

    t = &#39;cat&#39;    # @p
    w = 3        # @p parameter w has a help message whilst t does not
    h: int = 10  # @p h declared with typing is very concise and neat

    # Parameters can also be defined in the __init__ method
    def __init__(self, *args, **kwargs):
        super(BaseExperiment, self).__init__(*args, **kwargs)

        self.a: str = &#39;h&#39;  # @p A parameter
        self.b: int = 17   # @p Another parameter

        # Normal attributes are still allowed
        self.c: int = 5    # This is not a parameter


class AnotherExperiment(BaseExperiment):
    m: str = &#39;Another value&#39;  # @p Multiple inheritance example
    p: str = &#39;A parameter only in Another Experiment &#39;  # @p


class AnExperiment(BaseExperiment):
                    #     |
                    # Experiments can inherit from other experiments
                    # parameters are inherited too
    &quot;&quot;&quot;An experiment testing the xmen experiment API. The __docstring__ will
    appear in both the docstring of the class __and__ as the prolog in the
    command line interface.&quot;&quot;&quot;

    # Feel free to define more parameters
    x: List[float] = [3., 2.]  # @p Parameters can be defined cleanly as class attributes
    y: float = 5  # @p This parameter will have this
    # Parameters can be overridden
    a: float = 0.5  # a&#39;s default and type will be changed. Its help will be overridden
    b: int = 17  # @p b&#39;s help will be changed

    m: str = &#39;Defined in AnExperiment&#39;  # @p m is defined in AnExperiment

    def run(self):
        # Experiment execution is defined in the run method
        print(f&#39;The experiment state inside run is {self.status}&#39;)

        # recording messaging is super easy
        self.message({&#39;time&#39;: time.time()})

        # Each experiment has its own unique directory. You are encourage to
        # write out data accumulated through the execution (snapshots, logs etc.)
        # to this directory.
        with open(os.path.join(self.directory, &#39;logs.txt&#39;), &#39;w&#39;) as f:
            f.write(&#39;This was written from a running experiment&#39;)

    def debug(self):
        self.a = &#39;In debug mode&#39;
        return self

    @property
    def h(self):
        return &#39;h has been overloaded as propery and will no longer&#39; \
               &#39;considered as a parameter&#39;


# Experiments can inheret from multiple classes
class MultiParentsExperiment(AnotherExperiment, AnExperiment):
    pass
</pre></div>
</div>
<p>Note: the above is a copy of what is defined in <code class="docutils literal notranslate"><span class="pre">xmen.examplex.inheritance</span></code></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">xmen.examples.inheritance</span> <span class="k">import</span> <span class="n">AnExperiment</span><span class="p">,</span> <span class="n">AnotherExperiment</span><span class="p">,</span> <span class="n">MultiParentsExperiment</span>
<span class="kn">from</span> <span class="nn">notebook.services.config</span> <span class="k">import</span> <span class="n">ConfigManager</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">ConfigManager</span><span class="p">()</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s1">&#39;notebook&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;limit_output&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Automatic-Documentation">
<h2>Automatic Documentation<a class="headerlink" href="#Automatic-Documentation" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># documentation is automatically added to the class</span>
<span class="n">help</span><span class="p">(</span><span class="n">AnExperiment</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on class AnExperiment in module xmen.examples.inheritance:

class AnExperiment(BaseExperiment)
 |  AnExperiment(*args, **kwargs)
 |
 |  An experiment testing the xmen experiment API. The __docstring__ will
 |      appear in both the docstring of the class __and__ as the prolog in the
 |      command line interface.
 |
 |  Parameters:
 |      BaseExperiment
 |       t: None (default=cat)
 |       w: parameter w has a help message whilst t does not (default=3)
 |       a (float): A parameter (default=0.5)
 |      AnExperiment
 |       b: int=17 ~ b&#39;s help will be changed
 |       x: List[float]=[3., 2.] ~ Parameters can be defined cleanly as class attributes
 |       y: float=5 ~ This parameter will have this
 |       m: str=&#39;Defined in AnExperiment&#39; ~ m is defined in AnExperiment
 |
 |  Method resolution order:
 |      AnExperiment
 |      BaseExperiment
 |      xmen.experiment.Experiment
 |      builtins.object
 |
 |  Methods defined here:
 |
 |  debug(self)
 |      Inherited classes may overload debug. Used to define a set of open_socket for minimum example
 |
 |  run(self)
 |
 |  ----------------------------------------------------------------------
 |  Readonly properties defined here:
 |
 |  h
 |      int([x]) -&gt; integer
 |      int(x, base=10) -&gt; integer
 |
 |      Convert a number or string to an integer, or return 0 if no arguments
 |      are given.  If x is a number, return x.__int__().  For floating point
 |      numbers, this truncates towards zero.
 |
 |      If x is not a number or if base is given, then x must be a string,
 |      bytes, or bytearray instance representing an integer literal in the
 |      given base.  The literal can be preceded by &#39;+&#39; or &#39;-&#39; and be surrounded
 |      by whitespace.  The base defaults to 10.  Valid bases are 0 and 2-36.
 |      Base 0 means to interpret the base from the string as an integer literal.
 |      &gt;&gt;&gt; int(&#39;0b100&#39;, base=0)
 |      4
 |
 |  ----------------------------------------------------------------------
 |  Data and other attributes defined here:
 |
 |  __annotations__ = {&#39;a&#39;: &lt;class &#39;float&#39;&gt;, &#39;b&#39;: &lt;class &#39;int&#39;&gt;, &#39;m&#39;: &lt;cla...
 |
 |  a = 0.5
 |
 |  b = 17
 |
 |  m = &#39;Defined in AnExperiment&#39;
 |
 |  x = [3.0, 2.0]
 |
 |  y = 5
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from BaseExperiment:
 |
 |  __init__(self, *args, **kwargs)
 |      Create a new experiment object.
 |
 |      Args:
 |          root, name (str): If not None then the experiment will be registered to a folder ``{root}\{name}``
 |          purpose (str): An optional string giving the purpose of the experiment.
 |          copy (bool): If True then parameters are deep copied to the object instance from the class definition.
 |              Mutable attributes will no longer be shared.
 |          **kwargs: Override parameter defaults.
 |
 |  ----------------------------------------------------------------------
 |  Data and other attributes inherited from BaseExperiment:
 |
 |  t = &#39;cat&#39;
 |
 |  w = 3
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from xmen.experiment.Experiment:
 |
 |  __call__(self, *args, **kwargs)
 |      Used to run experiment. Upon entering the experiment status is updated to ``&#39;running`` before ``args`` and
 |      ``kwargs`` are passed to ``run()``. If ``run()`` is successful the experiment ``status`` is updated to
 |      ``&#39;finished&#39;`` else it will be given ``status=&#39;error&#39;``.
 |
 |      Both *args and **kwargs are passed to self.run.
 |
 |  __enter__(self)
 |
 |  __exit__(self, exc_type, exc_val, exc_tb)
 |
 |  __repr__(self)
 |      Provides a useful help message for the experiment
 |
 |  __setattr__(self, key, value)
 |      Attributes can only be changed when the status of the experiment is default
 |
 |  compare(self, k, v, keep=&#39;latest&#39;)
 |
 |  detach(self)
 |
 |  from_yml(self, path, copy=False)
 |      Load state from either a ``params.yml`` or ``defaults.yml`` file (inferred from the filename).
 |      The status of the experiment will be updated to ``&#39;default&#39;`` if ``&#39;defaults.yml&#39;``
 |      file else ``&#39;registered&#39;`` if ``params.yml`` file.
 |
 |  get_param_helps(self)
 |      Get help for all attributes in class (including inherited and private).
 |
 |  get_run_script(self, type=&#39;set&#39;, shell=&#39;/usr/bin/env python3&#39;, comment=&#39;#&#39;)
 |
 |  main(self, args=None)
 |      Take the command line args and execute the experiment (see ``parse_args`` for more
 |       information). In order to expose the command line interface::
 |
 |          if __name__ == &#39;__main__&#39;:
 |              exp = AnExperiment().main()
 |
 |      Note that for backwards compatibility it is also possible to pass ``args`` as an argument to ``main``.
 |      This allows the experiment to be run from the commandline as::
 |
 |          if __name__ == &#39;__main__&#39;:
 |              exp = AnExperiment()
 |              args = exp.parse_args()
 |              exp.main(args)
 |
 |  message(self, messages, keep=&#39;latest&#39;, leader=None)
 |      Add a message to the experiment (and an experiments params.yml file). If the experiment is not registered to
 |      a root then no messages will be logged.
 |
 |      Args:
 |          messages (dict): A dictionary of messages. Keys are interpreted as subjects and values interpreted as
 |              messages. If the ``defaults.yml`` already contains subject then the message for subject will be
 |              updated.
 |          keep (str): which message to keep in the case of collision. One of [&#39;latest&#39;, &#39;min&#39;, &#39;max&#39;]
 |          leader (str): If not None then all messages will be saved if the keep condition is met for the leader key.
 |
 |      Note:
 |          Only messages of type float, int and string are supported. Any other message will be converted to type float
 |          (if possible) then string thereafter.
 |
 |  param_keys(self)
 |
 |  parse_args(self)
 |      Configure the experiment instance from the command line arguments.
 |
 |  link(self, root, name, purpose=&#39;&#39;, force=True, same_names=100, generate_script=False, header=None)
 |      Register an experiment to an experiment directory. Its status will be updated to ``registered``. If an
 |      experiment called ``name`` exists in ``root`` and ``force==True`` then name will be appended with an int
 |      (eg. ``{name}_0``) until a unique name is found in ``root``. If ``force==False`` a ``ValueError`` will be raised.
 |
 |      Raises:
 |          ValueError: if ``{root}/{name}`` already contains a ``params.yml`` file
 |
 |  stdout_to_txt(self)
 |      Configure stdout to also log to a text file in the experiment directory
 |
 |  to_defaults(self, defaults_dir)
 |      Create a ``defaults.yml`` file from experiment object.
 |      Any base class inheriting from Experiment can create a default file as::
 |
 |         MyExperiment().to_yaml(&#39;/dir/to/defaults/root&#39;)
 |
 |  to_root(self, root_dir, shell=&#39;/bin/bash&#39;)
 |      Generate a ``defaults.yml`` file and ``script.sh`` file in ``root_dir``.
 |
 |      Args:
 |          root_dir (str): A path to the root directory in which to load_and_generate a script.sh and defaults.yml to
 |              run the experiment.
 |
 |  update(self, kwargs)
 |      Update the parameters with a given dictionary
 |
 |  update_meta(self)
 |
 |  update_version(self)
 |
 |  ----------------------------------------------------------------------
 |  Static methods inherited from xmen.experiment.Experiment:
 |
 |  convert_type(v)
 |
 |  ----------------------------------------------------------------------
 |  Readonly properties inherited from xmen.experiment.Experiment:
 |
 |  directory
 |      The directory assigned to the experiment
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors inherited from xmen.experiment.Experiment:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined)
 |
 |  created
 |      The date the experiment parameters were last updated.
 |
 |  messages
 |      A dictionary of messages logged by the experimet.
 |
 |  name
 |      The name of the current experiment
 |
 |  purpose
 |      A string giving a purpose message for the experiment
 |
 |  root
 |      The root directory to which the experiment belongs
 |
 |  status
 |      The status of the experiment. One of ``&#39;default&#39;``, ``&#39;registered&#39;``, ``&#39;running&#39;``, ``&#39;finished&#39;`` or
 |      ``&#39;error&#39;``.
 |
 |  version
 |      A dictionary giving the version information for the experiment

</pre></div></div>
</div>
</div>
<div class="section" id="Configuring-Experiments">
<h2>Configuring Experiments<a class="headerlink" href="#Configuring-Experiments" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># to run an experiment first we initialise it</span>
<span class="c1"># the experiment is initialised in &#39;default&#39; status</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Initialising&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---------------------------&#39;</span><span class="p">)</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">AnExperiment</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Initialising
---------------------------
status: default
created: 11-16-20-16:50:06
messages:
parameters:
  t: cat
  w: 3
  a: h
  b: 17
  x: [3.0, 2.0]
  y: 5
  m: Defined in AnExperiment
</pre></div></div>
</div>
</div>
<div class="section" id="Inheritance">
<h2>Inheritance<a class="headerlink" href="#Inheritance" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Experiments can inheret from multiple classes:</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Multiple Inheritance&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;----------------------&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">MultiParentsExperiment</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> Parameters defaults, helps and values are &#39;</span>
      <span class="s1">&#39;inherited according to experiments method resolution order &#39;</span>
      <span class="s1">&#39;(i.e left to right). Note that m has the value &#39;</span>
      <span class="s1">&#39;defined in Another Experiment&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Multiple Inheritance
----------------------
status: default
created: 11-16-20-16:50:07
messages:
parameters:
  t: cat
  w: 3
  a: h
  b: 17
  m: Another value
  p: A parameter only in Another Experiment
  x: [3.0, 2.0]
  y: 5

 Parameters defaults, helps and values are inherited according to experiments method resolution order (i.e left to right). Note that m has the value defined in Another Experiment
</pre></div></div>
</div>
</div>
<div class="section" id="Configuring">
<h2>Configuring<a class="headerlink" href="#Configuring" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># whilst the status is default the parameters of the</span>
<span class="c1"># experiment can be changed</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Configuring&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;------------ &#39;</span><span class="p">)</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">AnExperiment</span><span class="p">()</span>
<span class="n">exp</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;hello&#39;</span>
<span class="n">exp</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">})</span>
<span class="c1"># Note parameters are copied from the class during</span>
<span class="c1"># instantiation. This way you don&#39;t need to worry</span>
<span class="c1"># about accidentally changing the mutable class</span>
<span class="c1"># types across the entire class.</span>
<span class="n">exp</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="p">[</span><span class="mf">4.</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">AnExperiment</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="p">[</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">]</span>
<span class="c1"># If this is not desired (or neccessary) initialise</span>
<span class="c1"># use exp = AnExperiment(copy=False)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Configuring
------------
status: default
created: 11-16-20-16:50:07
messages:
parameters:
  t: dog
  w: 100
  a: hello
  b: 17
  x: [3.0, 2.0, 4.0]
  y: 5
  m: Defined in AnExperiment
</pre></div></div>
</div>
</div>
<div class="section" id="Registering">
<h2>Registering<a class="headerlink" href="#Registering" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Registering&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-------------&#39;</span><span class="p">)</span>
<span class="c1"># Before being run an experiment needs to be registered</span>
<span class="c1"># to a directory</span>
<span class="n">exp</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="s1">&#39;/tmp/an_experiment&#39;</span><span class="p">,</span> <span class="s1">&#39;first_experiment&#39;</span><span class="p">,</span>
             <span class="n">purpose</span><span class="o">=</span><span class="s1">&#39;A bit of a test of the xmen experiment api&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">GIT, and system information is automatically logged</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Registering
-------------
root: /tmp/an_experiment
name: first_experiment_4
status: registered
created: 11-16-20-16:50:07
purpose: A bit of a test of the xmen experiment api
messages:
version:
  module: xmen.examples.inheritance
  class: AnExperiment
  path: /home/robw/projects/xmen/xmen/examples
  git:
    local: /home/robw/projects/xmen
    remote: https://github.com/robw4/xmen.git
    commit: 46b61c87b4001157a408217a1a3534f62029a1db
    branch: master
meta:
  mac: 0x708bcd585ff7
  host: yossarian
  user: robw
  home: /home/robw
parameters:
  t: dog
  w: 100
  a: hello
  b: 17
  x: [3.0, 2.0, 4.0]
  y: 5
  m: Defined in AnExperiment

GIT, and system information is automatically logged

</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># The parameters of the experiment can no longer be changed</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">exp</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;cat&#39;</span>
<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Parameters can no longer be changed!&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Parameters can no longer be changed!
</pre></div></div>
</div>
</div>
<div class="section" id="Running">
<h2>Running<a class="headerlink" href="#Running" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># An experiment can be run either by...</span>
<span class="c1"># (1) calling it</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Running (1)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-------------&#39;</span><span class="p">)</span>
<span class="n">exp</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Running (1)
-------------
The experiment state inside run is running
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># (2) using it as a context. Just define a main</span>
<span class="c1">#     loop like you normally would</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Running (2)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-------------&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">exp</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c1"># Inside the experiment context the experiment status is &#39;running&#39;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Once again the experiment state is </span><span class="si">{e.status}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="c1"># Write the main loop just as you normally would&quot;</span>
    <span class="c1"># using the parameters already defined</span>
    <span class="n">results</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">sum</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="nb">max</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="nb">min</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
    <span class="c1"># Write results to the expeirment just as before</span>
    <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Running (2)
-------------
Once again the experiment state is running
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># All the information about the current experiment is</span>
<span class="c1"># automatically saved in the experiments root directory</span>
<span class="c1"># for free</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Everything ypu might need to know is logged in </span><span class="si">{exp.directory}</span><span class="s1">/params.yml&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-----------------------------------------------------------------------------------------------&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Note that GIT, and system information is automatically logged</span><span class="se">\n</span><span class="s1">&#39;</span>
      <span class="s1">&#39;along with the messages&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/tmp/an_experiment/first_experiment/params.yml&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Everything ypu might need to know is logged in /tmp/an_experiment/first_experiment_4/params.yml
-----------------------------------------------------------------------------------------------
Note that GIT, and system information is automatically logged
along with the messages
_created: 11-16-20-16:27:41  # _created: str=now_time ~ The date the experiment was created
_messages: # _messages: Dict[Any, Any]={} ~ Messages left by the experiment
  time: 1605544061.5061884
  sum: 9.0
  max: 4.0
  min: 2.0
_meta: # _meta: Optional[Dict]=None ~ The global configuration for the experiment manager
  mac: &#39;0x708bcd585ff7&#39;
  host: yossarian
  user: robw
  home: /home/robw
_name: first_experiment # _name: Optional[str]=None ~ The name of the experiment (under root)
_purpose: A bit of a test of the xmen experiment api # _purpose: Optional[str]=None ~ A description of the experiment purpose
_root: /tmp/an_experiment # _root: Optional[str]=None ~ The root directory of the experiment
_status: finished # _status: str=&#39;default&#39; ~ One of [&#39;default&#39; | &#39;created&#39; | &#39;running&#39; | &#39;error&#39; | &#39;finished&#39;]
_version: # _version: Optional[Dict[Any, Any]]=None ~ Experiment version information. See `get_version`
  module: __main__
  class: AnExperiment
  path: /home/robw/projects/xmen/xmen/examples
  git:
    local: /home/robw/projects/xmen
    remote: https://github.com/robw4/xmen.git
    commit: 46b61c87b4001157a408217a1a3534f62029a1db
    branch: master
a: hello # a (float): A parameter (default=0.5)
b: 17 # b: int=17 ~ b&#39;s help will be changed
m: Defined in AnExperiment # m: str=&#39;Defined in AnExperiment&#39; ~ m is defined in AnExperiment
t: dog # t: None (default=cat)
w: 100 # w: parameter w has a help message whilst t does not (default=3)
x: # x: List[float]=[3., 2.] ~ Parameters can be defined cleanly as class attributes
- 3.0
- 2.0
- 4.0
y: 5 # y: float=5 ~ This parameter will have this

</pre></div></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cheat-sheet.html" class="btn btn-neutral float-right" title="Cheat Sheet" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="examples.html" class="btn btn-neutral" title="Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Rob Weston.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2.3',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>
      <script type="text/javascript" src="_static/jquery.fancybox.min.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
  <script type="text/javascript">
    $(function(){
      $('.image-reference').fancybox();
    })
  </script>

</body>
</html>